<html>
	<head>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing"></script>
		<script type="text/processing" data-processing-target="mycanvas">

		//screen dimensions
		var width = 800;
		var height = 500;
		var dir = "right"; 
		Nick nick;
		
		var levels = [//1 = wall, 0 = space 20 rows / columns
			[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
			[1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
			[1,0,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0,1],
			[0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
			[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],
			[1,1,1,1,0,0,1,1,1,1,0,1,1,1,0,0,1,1,1,1],
			[1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1],
			[1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1],
			[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],
			[1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1],
			[0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],
			[1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,1,0,0,0,0,0,0,0,0,1,0,1,1,0,1],
			[1,0,1,1,0,1,0,1,1,1,1,1,1,0,1,0,1,1,0,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]], 
			
			[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]], 
			
			[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]
			
			];
		
		//first level is initialized to first	
		var maze = levels[0]; 
		
		//cell width and cell height
		var cellWidth = 20;
		var cellHeight = 20; 

			void setup()
			{
			
			  size(width,height);
			  background(125);
			  fill(255);
			  //noLoop();
			  PFont fontA = loadFont("courier");
			  textFont(fontA, 14); 
			  nick = new Nick(10, 10, 10, 10, 1); 

			  
			}

			void draw(){  
				background(125);
			  text("Hello Web!",20,20);
			  println("Hello ErrorLog!");
			 
			  //build the maze
			  for(int i =0; i< maze.length; i++){
			  	for(int j = 0; j<maze[0].length; j++){
					//draw every cell
					var x = cellWidth * j;
					var y = cellHeight *i;
					if(maze[i][j] == 0){
						//is space
						noStroke();
						fill(255, 0,0);
						rect(x, y, cellWidth, cellHeight); 
					}else if(maze[i][j] == 1){
						//is wall
						noStroke();
						fill(0,0,255);
						rect(x, y, cellWidth, cellHeight); 
					}
					
			  		
			  	}
			  }
			  
			  nick.drawNick();
			  
			  //detect key,and decide direction
			  if(keyPressed==true){
			  	if(keyCode ==39){
			  		dir = "right";
			  	}else if (keyCode == 37){
			  		dir = "left";
			  	}else if(keyCode == 40){
			  		dir = "up";
			  	}else if(keyCode == 38){
			  		dir = "down";
			  	}
			  	
			  }
			  nick.moveNick(dir);
			  

			  

		}
		
		class Nick{
			var nWidth;
			var nHeight; 
			var x;
			var y;
			var s;
			Nick(w,h,xVal, yVal, speed){
				nWidth = w;
				nHeight = h;
				x = xVal;
				y=yVal;
				s = speed;
			}
			void drawNick(){
				noStroke();
				fill(0,255,0);
			  	ellipse(x,y,nWidth,nHeight);
			}
			void moveNick(dir){
				if (dir == "up"){
					y = y+s;
				}else if (dir == "down"){
					y = y -s;
				}else if (dir == "left"){
					x = x -s; 
				}else if(dir == "right"){
					x = x+s;
				}
			}
		
		
		}

		
		</script>
	</head>
	<body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>